import{u as f,h as o,p as v,o as _,c as g,t as b,b as y,l as S}from"./index-BDwy4jZX.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={__name:"EditableText",props:{text:{type:String,required:!0},type:{type:String,default:"",validator:n=>["","win","lose"].includes(n)},id:{type:String,required:!0}},emits:["update"],setup(n,{emit:r}){const a=n,l=r;f();const c=o(null),t=o(a.text),i=o(!1),d=S(()=>{const e=t.value.trim();return e==="输"||e==="输了"?"lose-text":e==="赢"||e==="赢了"||a.type==="win"?"win-text":a.type==="lose"?"lose-text":""}),u=()=>{const e=localStorage.getItem(`editable_${a.id}`);e&&(t.value=e,l("update",e))},p=e=>{i.value||(t.value=e.target.innerText)},m=e=>{i.value=!1,t.value=e.target.innerText.trim()},x=()=>{const s=t.value.trim().replace(/[a-zA-Z]+/g,"").trim();s&&(t.value=s,localStorage.setItem(`editable_${a.id}`,s),l("update",s))};return u(),v(()=>a.text,e=>{localStorage.getItem(`editable_${a.id}`)||(t.value=e)}),(e,s)=>(_(),g("span",{ref_key:"editableRef",ref:c,class:y(["editable-text",d.value]),contenteditable:"true",onBlur:x,onInput:p,onCompositionend:m},b(t.value),35))}},C=h(I,[["__scopeId","data-v-08a7bed8"]]);export{C as E};
